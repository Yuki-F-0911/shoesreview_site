# 本番環境移行チェックリスト

本番環境にデプロイする前に、以下の項目を確認してください。

## 事前準備

### 環境変数
- [ ] 本番環境用の`DATABASE_URL`を取得・設定
- [ ] `NEXTAUTH_URL`を本番環境のURLに設定
- [ ] `NEXTAUTH_SECRET`を強力なキーに変更（32文字以上）
- [ ] Cloudinaryの設定（画像アップロードを使用する場合）
- [ ] AI機能のAPIキー設定（使用する場合）
- [ ] その他のオプション環境変数の設定

### データベース
- [ ] 本番環境のPostgreSQLデータベースを作成
- [ ] データベース接続URLを確認
- [ ] SSL接続が必要な場合は`?sslmode=require`を追加
- [ ] マイグレーションを実行: `npx prisma migrate deploy`
- [ ] 必要に応じてレビューデータをインポート: `npm run import:backup`

### セキュリティ
- [ ] `.env`ファイルが`.gitignore`に含まれていることを確認
- [ ] 本番環境のシークレットキーが開発環境と異なることを確認
- [ ] HTTPSが有効になっていることを確認
- [ ] 不要な環境変数が公開されていないことを確認

## ビルドとデプロイ

### ローカルでの確認
- [ ] `npm run build`が成功することを確認
- [ ] `npm run lint`でエラーがないことを確認
- [ ] TypeScriptの型エラーがないことを確認

### デプロイ
- [ ] ホスティングサービスにプロジェクトを接続
- [ ] 環境変数を設定
- [ ] ビルドコマンドが正しく設定されていることを確認
- [ ] デプロイを実行

### デプロイ後の確認
- [ ] アプリケーションが正常に起動している
- [ ] トップページが表示される
- [ ] レビュー一覧が表示される
- [ ] ユーザー登録・ログインが動作する
- [ ] レビュー投稿が動作する
- [ ] 画像アップロードが動作する（設定している場合）
- [ ] データベース接続が正常に動作している

## パフォーマンス

- [ ] ページの読み込み速度を確認
- [ ] 画像の最適化が機能している
- [ ] APIレスポンス時間を確認
- [ ] データベースクエリのパフォーマンスを確認

## モニタリング

- [ ] エラーログの監視設定
- [ ] パフォーマンスメトリクスの監視設定
- [ ] データベースの監視設定

## バックアップ

- [ ] データベースのバックアップ設定
- [ ] 環境変数のバックアップ（安全な場所に保存）
- [ ] コードのバージョン管理（Git）が適切に行われている

## ドキュメント

- [ ] `DEPLOYMENT.md`を確認
- [ ] 本番環境のURLとアクセス情報を記録
- [ ] 緊急時の連絡先を記録

---

## トラブルシューティング

問題が発生した場合は、`DEPLOYMENT.md`の「トラブルシューティング」セクションを参照してください。

