# シューズレビューサイト - 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
**シューズレビューサイト（仮称）**

### 1.2 プロジェクトの目的
- ユーザーが自由にシューズのレビューを投稿・閲覧できるプラットフォームの構築
- AIが複数のソースから情報を自動収集し、統合されたレビュー情報を提供
- シューズ購入の意思決定を支援する信頼性の高い情報源の提供

### 1.3 ターゲットユーザー
- シューズ購入を検討している一般消費者
- ランニング、バスケットボール、ファッションなどの特定用途でシューズを探しているユーザー
- シューズコレクター・愛好家
- シューズに関する情報を共有したいレビュアー

---

## 2. 主要機能

### 2.1 ユーザー機能

#### 2.1.1 会員機能
- [ ] ユーザー登録（メール認証）
- [ ] ログイン・ログアウト
- [ ] プロフィール管理
- [ ] パスワードリセット
- [ ] アカウント削除

#### 2.1.2 レビュー投稿機能
- [ ] レビュー新規作成
  - シューズ情報（ブランド、モデル名、サイズ、色）
  - 評価（総合評価、履き心地、デザイン、耐久性など）
  - レビュー本文（テキスト）
  - 画像アップロード（複数枚）
  - 使用用途・シーン
  - 着用期間
- [ ] レビュー編集
- [ ] レビュー削除
- [ ] 下書き保存

#### 2.1.3 レビュー閲覧機能
- [ ] レビュー一覧表示
- [ ] レビュー詳細表示
- [ ] 検索機能
  - ブランド名検索
  - モデル名検索
  - カテゴリー検索
  - 評価フィルター
  - 価格帯フィルター
- [ ] ソート機能（新着順、評価順、人気順）
- [ ] ページネーション

#### 2.1.4 インタラクション機能
- [ ] レビューへの「いいね」
- [ ] レビューへのコメント
- [ ] レビューのシェア（SNS連携）
- [ ] ユーザーフォロー機能
- [ ] ブックマーク機能

### 2.2 AI機能

#### 2.2.1 情報収集機能
- [ ] 外部サイトからの情報スクレイピング
  - ECサイト（Amazon、楽天など）
  - メーカー公式サイト
  - レビューサイト
  - SNS（Twitter/X、Instagram等）
- [ ] API連携による情報取得
- [ ] データの定期自動収集

#### 2.2.2 情報統合・分析機能
- [ ] 複数ソースのレビュー情報の統合
- [ ] 感情分析・センチメント分析
- [ ] 評価スコアの正規化・統合
- [ ] 長所・短所の自動抽出
- [ ] カテゴリー別評価の集計

#### 2.2.3 AI投稿機能
- [ ] 統合レビューの自動生成
- [ ] AI生成コンテンツの明示
- [ ] 情報源の表示・リンク
- [ ] 定期的な情報更新
- [ ] 信頼性スコアの表示

### 2.3 管理機能

#### 2.3.1 管理者機能
- [ ] ユーザー管理
- [ ] レビュー管理（承認・削除）
- [ ] 不適切コンテンツの管理
- [ ] AI収集設定の管理
- [ ] システム設定

#### 2.3.2 モデレーション機能
- [ ] スパム検出
- [ ] 不適切コンテンツの自動検出
- [ ] ユーザー通報機能
- [ ] レビューの真正性チェック

---

## 3. ユーザーストーリー

### 3.1 一般ユーザー
```
As a シューズ購入検討者
I want to 様々なシューズのレビューを閲覧できる
So that 購入前に十分な情報を得られる
```

```
As a シューズ所有者
I want to 自分の使用経験をレビューとして投稿できる
So that 他のユーザーの購入判断に役立てられる
```

### 3.2 AIシステム
```
As a AIシステム
I want to 複数のソースから情報を自動収集できる
So that ユーザーに包括的な情報を提供できる
```

```
As a AIシステム
I want to 収集した情報を統合・分析できる
So that より価値の高い統合レビューを生成できる
```

---

## 4. 技術要件

### 4.1 推奨技術スタック

#### フロントエンド
- **フレームワーク**: Next.js 14+ (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **状態管理**: Zustand / Jotai
- **フォーム管理**: React Hook Form
- **バリデーション**: Zod

#### バックエンド
- **フレームワーク**: Next.js API Routes / tRPC
- **データベース**: PostgreSQL
- **ORM**: Prisma
- **認証**: NextAuth.js / Clerk
- **ファイルストレージ**: AWS S3 / Cloudinary

#### AI・データ収集
- **AI/LLM**: OpenAI GPT-4 / Anthropic Claude
- **スクレイピング**: Puppeteer / Playwright
- **自然言語処理**: LangChain
- **ベクトルDB**: Pinecone / Supabase Vector

#### インフラ
- **ホスティング**: Vercel / AWS
- **CI/CD**: GitHub Actions
- **監視**: Sentry / Datadog

### 4.2 非機能要件

#### パフォーマンス
- ページ読み込み時間: 3秒以内
- API応答時間: 500ms以内
- 画像最適化: WebP形式、遅延読み込み

#### セキュリティ
- HTTPS通信
- CSRF対策
- XSS対策
- SQLインジェクション対策
- レート制限
- 個人情報の暗号化

#### 可用性
- アップタイム: 99.9%以上
- バックアップ: 日次自動バックアップ
- エラーハンドリング

#### スケーラビリティ
- 水平スケーリング対応
- CDN活用
- データベース最適化

---

## 5. データモデル設計

### 5.1 主要エンティティ

#### User（ユーザー）
```typescript
{
  id: string
  email: string
  username: string
  displayName: string
  avatarUrl?: string
  bio?: string
  createdAt: Date
  updatedAt: Date
}
```

#### Shoe（シューズ）
```typescript
{
  id: string
  brand: string
  modelName: string
  category: string
  releaseYear?: number
  officialPrice?: number
  imageUrls: string[]
  description?: string
  createdAt: Date
  updatedAt: Date
}
```

#### Review（レビュー）
```typescript
{
  id: string
  shoeId: string
  userId: string
  type: 'USER' | 'AI'
  overallRating: number (1-5)
  comfortRating?: number
  designRating?: number
  durabilityRating?: number
  title: string
  content: string
  imageUrls: string[]
  usagePeriod?: string
  usageScene?: string[]
  pros?: string[]
  cons?: string[]
  isPublished: boolean
  isDraft: boolean
  aiSources?: AISource[] // AI投稿の場合
  createdAt: Date
  updatedAt: Date
}
```

#### AISource（AI情報源）
```typescript
{
  id: string
  reviewId: string
  sourceType: string
  sourceUrl: string
  scrapedAt: Date
  reliability: number
}
```

#### Comment（コメント）
```typescript
{
  id: string
  reviewId: string
  userId: string
  content: string
  createdAt: Date
  updatedAt: Date
}
```

#### Like（いいね）
```typescript
{
  id: string
  reviewId: string
  userId: string
  createdAt: Date
}
```

---

## 6. 画面設計

### 6.1 主要画面一覧

1. **トップページ**
   - 新着レビュー一覧
   - 人気レビュー
   - カテゴリー別レビュー
   - 検索バー

2. **レビュー一覧ページ**
   - フィルター・ソート機能
   - カード形式表示
   - ページネーション

3. **レビュー詳細ページ**
   - レビュー内容表示
   - 評価グラフ
   - 画像ギャラリー
   - コメント一覧
   - 関連レビュー

4. **レビュー投稿ページ**
   - フォーム入力
   - 画像アップロード
   - プレビュー機能

5. **ユーザーページ**
   - プロフィール情報
   - 投稿レビュー一覧
   - フォロー・フォロワー

6. **検索結果ページ**
   - 検索結果表示
   - フィルター機能

7. **マイページ**
   - ダッシュボード
   - 投稿管理
   - ブックマーク
   - 設定

---

## 7. システム構成

### 7.1 システムアーキテクチャ

```
[フロントエンド]
   ↓↑
[API Layer (Next.js API Routes)]
   ↓↑
[ビジネスロジック層]
   ↓↑
[データアクセス層 (Prisma)]
   ↓↑
[データベース (PostgreSQL)]

[AI収集・分析システム] → [キュー (Redis/Bull)]
   ↓
[外部API / スクレイピング]
   ↓
[データ処理・統合]
   ↓
[LLM API (GPT-4/Claude)]
   ↓
[データベース]
```

### 7.2 外部サービス連携
- 認証サービス
- ストレージサービス
- AI/LLMサービス
- メール送信サービス
- 画像最適化サービス

---

## 8. 開発フェーズ

> **📋 詳細なMVP計画については、[MVP計画書.md](./MVP計画書.md) を参照してください。**

### Phase 1: MVP（最小viable製品）

#### 8.1.1 ユーザー認証機能
- [ ] ユーザー登録（メール/パスワード）
- [ ] ログイン・ログアウト
- [ ] セッション管理
- [ ] プロフィール基本情報（表示名、アバター任意）
- [ ] プロフィール編集

**含めない機能（Phase 2以降）**:
- メール認証
- パスワードリセット
- OAuth連携
- アカウント削除

#### 8.1.2 レビュー投稿機能
- [ ] レビュー新規作成
  - シューズ情報入力（ブランド、モデル、カテゴリー、サイズ、色）
  - 評価入力（総合評価必須、履き心地・デザイン・耐久性任意）
  - レビュー本文（タイトル、本文）
  - 画像アップロード（最大3枚）
  - 使用用途・シーン（任意）
  - 着用期間（任意）
- [ ] レビュー編集（自分のレビューのみ、24時間以内）
- [ ] レビュー削除（自分のレビューのみ）

**含めない機能（Phase 2以降）**:
- 下書き保存
- レビュー公開/非公開切り替え
- レビュー承認フロー

#### 8.1.3 レビュー閲覧機能
- [ ] レビュー一覧表示（カード形式、ページネーション）
- [ ] レビュー詳細表示（全文、評価詳細、画像ギャラリー）
- [ ] ソート機能（新着順、評価順）
- [ ] 検索機能
  - キーワード検索（ブランド、モデル、レビュー本文）
  - カテゴリーフィルター
  - 評価フィルター（3以上、4以上、5のみ）

**含めない機能（Phase 2以降）**:
- 高度なフィルター（価格帯、サイズ、色等）
- 人気順ソート（いいね数ベース）
- 関連レビュー表示
- レビュー統計情報

#### 8.1.4 UI/UX実装
- [ ] レスポンシブデザイン（モバイル・タブレット・デスクトップ対応）
- [ ] 基本的なナビゲーション（ヘッダー、フッター）
- [ ] トップページ（ヒーロー、新着レビュー、高評価レビュー、検索バー）
- [ ] 基本的なUIコンポーネント（ボタン、入力フィールド、カード等）

**含めない機能（Phase 2以降）**:
- ダークモード
- アニメーション・トランジション
- 高度なUIコンポーネント

#### 8.1.5 データ管理
- [ ] データベーススキーマ（User, Shoe, Review, AISource）
- [ ] データバリデーション（サーバー・クライアント）
- [ ] エラーハンドリング

#### 8.1.6 AI機能（MVPに含める）
- [ ] 基本的な情報収集
  - 1つのソース（Amazon）からの手動情報収集
  - WebスクレイピングまたはAPI連携
  - 商品情報・価格・画像の収集
- [ ] AI統合レビュー生成
  - LLM（OpenAI GPT-4またはClaude）を使用
  - 収集情報を基に統合レビューを生成
  - プロンプトエンジニアリング
- [ ] AI生成コンテンツの明示
  - 「AI生成」バッジ表示
  - ユーザー生成レビューと区別
- [ ] 情報源の表示
  - 情報源URLの表示
  - 収集日時の表示

**含めない機能（Phase 2以降）**:
- 複数ソースからの自動収集
- 定期自動収集（バッチ処理）
- 感情分析・センチメント分析
- 信頼性スコアの計算
- SNSからの情報収集

**開発期間**: 5-7週間を想定（AI機能追加により1週間延長）

### Phase 2: AI機能の拡張
- [ ] 複数ソースからの情報収集（楽天、メーカーサイト等）
- [ ] 定期自動収集（バッチ処理）
- [ ] 感情分析・センチメント分析
- [ ] 信頼性スコアの計算
- [ ] SNSからの情報収集

### Phase 3: インタラクション機能
- [ ] いいね・コメント機能
- [ ] フォロー機能
- [ ] ブックマーク機能
- [ ] 通知機能

### Phase 4: 高度な機能
- [ ] レコメンデーション機能
- [ ] 高度な検索・フィルター
- [ ] AI分析ダッシュボード
- [ ] モバイルアプリ対応

---

## 9. リスクと課題

### 9.1 技術的リスク
- **スクレイピングの法的問題**: robots.txt遵守、利用規約確認
- **AI生成コンテンツの品質**: 人間によるレビュー・編集フロー
- **データ量増加**: スケーラビリティの確保
- **外部API依存**: フォールバック戦略

### 9.2 ビジネスリスク
- **コンテンツの信頼性**: モデレーション体制の構築
- **スパム対策**: 自動検出システムの導入
- **著作権問題**: 画像・テキストの使用許諾
- **運用コスト**: AI API使用料の管理

---

## 10. 成功指標（KPI）

### 10.1 ユーザー指標
- 月間アクティブユーザー数（MAU）
- ユーザー登録数
- レビュー投稿数
- ページビュー数
- 平均セッション時間

### 10.2 エンゲージメント指標
- いいね数
- コメント数
- シェア数
- リピート訪問率

### 10.3 AI機能指標
- AI投稿数
- AI投稿の閲覧数
- AI投稿の評価（いいね率）
- 情報収集成功率

---

## 11. 今後の検討事項

### 11.1 機能拡張
- [ ] 価格比較機能
- [ ] 在庫状況確認
- [ ] サイズ感レコメンド（AI活用）
- [ ] バーチャル試着（AR機能）
- [ ] コミュニティフォーラム

### 11.2 収益化
- [ ] アフィリエイト連携
- [ ] 広告表示
- [ ] プレミアム会員機能
- [ ] 企業向けプラン

---

## 12. 参考情報

### 12.1 類似サービス
- Sneaker News
- StockX
- GOAT
- Kicksonfire
- 各種シューズレビューブログ

### 12.2 技術参考
- Next.js公式ドキュメント
- OpenAI API ドキュメント
- Prisma ドキュメント
- Web Scraping Best Practices

---

## 変更履歴

| 日付 | バージョン | 変更内容 | 作成者 |
|------|-----------|---------|--------|
| 2025-11-17 | 1.0 | 初版作成 | - |

---

## 承認

| 役割 | 氏名 | 承認日 | 署名 |
|------|------|--------|------|
| プロジェクトオーナー | | | |
| テックリード | | | |
| デザインリード | | | |

